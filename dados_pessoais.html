<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gestão de Perfil</title>

  <!-- Estilos base -->
  <link rel="stylesheet" href="estilos/dashboard.css" />
  <link rel="stylesheet" href="estilos/dados_pessoais.css" />

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- Firebase v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
</head>

<body>
  <div id="dashboard-container" class="dashboard-container">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="logo-area">
        <a href="dashboard.html">
          <img src="imagens/LogoIPCA.png" alt="IPCA" class="logo-ipca"/>
        </a>
      </div>

      <button id="toggle-sidebar" class="toggle-btn">←</button>

      <nav class="menu-principal">
        <a href="dashboard.html" class="menu-item">
          <i class="fas fa-home"></i><span>Menu Inicial</span>
        </a>
        <a href="explorar_eventos.html" class="menu-item">
          <i class="fas fa-search"></i><span>Explorar Eventos</span>
        </a>
        <a href="minhas_inscricoes.html" class="menu-item">
          <i class="fas fa-ticket-alt"></i><span>As Minhas Inscrições</span>
        </a>
        <a href="eventos_favoritos.html" class="menu-item">
          <i class="fas fa-star"></i><span>Eventos Favoritos</span>
        </a>
        <a href="dados_pessoais.html" class="menu-item active">
          <i class="fas fa-user-cog"></i><span>Gestão de Perfil</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="perfil-info">
          <p id="display-nome-utilizador" class="nome-utilizador">Utilizador</p>
          <p id="display-perfil-utilizador" class="perfil-utilizador">Participante</p>
        </div>

        <a href="#" id="btn-logout" class="btn-logout">
          <i class="fas fa-sign-out-alt"></i> <span>Sair</span>
        </a>
      </div>
    </aside>

    <!-- CONTEÚDO -->
    <main class="main-content">
      <header class="main-header">
        <h1>Gestão de Perfil</h1>
        <p>Atualiza os teus dados pessoais e a tua palavra-passe.</p>
      </header>

      <div id="debug-erro" class="debug-erro" style="display:none;"></div>

      <section class="perfil-grid">

        <!-- =========================
             DADOS PESSOAIS
        ========================== -->
        <div class="perfil-card">
          <div class="perfil-card-top">
            <h2><i class="fas fa-user"></i> Dados Pessoais</h2>
            <span class="perfil-pill" id="perfil-pill">Participante</span>
          </div>

          <form id="form-perfil" class="perfil-form">
            <div class="campo">
              <label>Email (login)</label>
              <input id="email" type="email" disabled />
            </div>

            <div class="row-2">
              <div class="campo">
                <label>Nome</label>
                <input id="nome" type="text" placeholder="Ex.: Rodrigo Silva" />
              </div>

              <div class="campo">
                <label>Idade</label>
                <input id="idade" type="number" min="1" max="120" placeholder="Ex.: 22" />
              </div>
            </div>

            <div class="row-2">
              <div class="campo">
                <label>Telemóvel</label>
                <input id="telemovel" type="tel" placeholder="Ex.: 912345678" />
              </div>

              <div class="campo">
                <label>Curso</label>
                <input id="curso" type="text" placeholder="Ex.: Engenharia Informática" />
              </div>
            </div>

            <div class="campo">
              <label>Bio</label>
              <textarea id="bio" rows="3" placeholder="Escreve uma pequena descrição..."></textarea>
            </div>

            <div class="acoes">
              <button id="btn-guardar" class="btn btn-primario" type="submit">
                <i class="fas fa-save"></i> Guardar alterações
              </button>
            </div>

            <div id="status" class="status" style="display:none;"></div>
          </form>
        </div>

        <!-- =========================
             ALTERAR PASSWORD REAL
        ========================== -->
        <div class="perfil-card">
          <h2><i class="fas fa-lock"></i> Alterar Palavra-passe</h2>
          <p class="widget-detalhe">
            A password é alterada diretamente no sistema de autenticação.
          </p>

          <form id="form-pass" class="perfil-form" style="margin-top:12px;">
            <div class="campo">
              <label>Password atual</label>
              <input id="pass-atual" type="password" autocomplete="current-password" required />
            </div>

            <div class="row-2">
              <div class="campo">
                <label>Nova password</label>
                <input id="pass-nova" type="password" minlength="6" required />
              </div>

              <div class="campo">
                <label>Confirmar nova password</label>
                <input id="pass-confirmar" type="password" minlength="6" required />
              </div>
            </div>

            <div class="acoes">
              <button id="btn-mudar-pass" class="btn btn-primario" type="submit">
                <i class="fas fa-key"></i> Guardar password
              </button>
            </div>

            <div id="status-pass" class="status" style="display:none;"></div>
          </form>
        </div>

        <!-- =========================
             INFO DA CONTA
        ========================== -->
        <div class="perfil-card perfil-card-side">
          <h2><i class="fas fa-shield-halved"></i> Informação da Conta</h2>

          <div class="info-line">
            <span class="k">Email:</span>
            <span class="v" id="info-conta">—</span>
          </div>

          <div class="info-line">
            <span class="k">UID:</span>
            <span class="v mono" id="info-uid">—</span>
          </div>

          <div class="info-line">
            <span class="k">Conta criada em:</span>
            <span class="v" id="info-criado">—</span>
          </div>
        </div>

      </section>
    </main>
  </div>

  <!-- JS -->
  <script type="module" src="dados_pessoais.js"></script>
</body>
</html>
